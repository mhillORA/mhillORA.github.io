@ -432,7 +432,15 @@
                    <div><label class="block text-sm font-medium">Full Name</label><input type="text" name="name" required class="mt-1 w-full p-2 border rounded"></div>
                    <div><label class="block text-sm font-medium">Age</label><input type="number" name="age" class="mt-1 w-full p-2 border rounded"></div>
                    <div><label class="block text-sm font-medium">Condition</label><input type="text" name="condition" class="mt-1 w-full p-2 border rounded"></div>
                    <div><label class="block text-sm font-medium">Status</label><input type="text" name="status" value="Candidate" class="mt-1 w-full p-2 border rounded"></div>
                    <div>
                        <label class="block text-sm font-medium">Status</label>
                        <select name="status" class="mt-1 w-full p-2 border rounded bg-white">
                            <option>Candidate</option>
                            <option>Enrolled</option>
                            <option>Pre-Screening</option>
                            <option>Screen Fail</option>
                        </select>
                    </div>
                    <div><label class="block text-sm font-medium">Assign to Study</label><select name="studyId" class="mt-1 w-full p-2 border rounded bg-white"><option value="">None</option>${state.studies.map(s => `<option value="${s.id}">${s.title}</option>`).join('')}</select></div>
                    <div><label class="block text-sm font-medium">Assign to Site</label><select name="siteId" class="mt-1 w-full p-2 border rounded bg-white"><option value="">None</option>${state.sites.map(s => `<option value="${s.id}">${s.name}</option>`).join('')}</select></div>
                    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700">Add Patient</button>
@ -476,13 +484,19 @@
        };

        const getEditPatientModalHTML = (patient) => {
             const statuses = ['Candidate', 'Enrolled', 'Pre-Screening', 'Screen Fail'];
             return `
                <h2 class="text-2xl font-bold mb-4">Edit Patient</h2>
                <form id="edit-patient-form" data-id="${patient.id}" class="space-y-4">
                    <div><label class="block text-sm font-medium">Full Name</label><input type="text" name="name" required class="mt-1 w-full p-2 border rounded" value="${patient.name}"></div>
                    <div><label class="block text-sm font-medium">Age</label><input type="number" name="age" class="mt-1 w-full p-2 border rounded" value="${patient.age || ''}"></div>
                    <div><label class="block text-sm font-medium">Condition</label><input type="text" name="condition" class="mt-1 w-full p-2 border rounded" value="${patient.condition || ''}"></div>
                    <div><label class="block text-sm font-medium">Status</label><input type="text" name="status" class="mt-1 w-full p-2 border rounded" value="${patient.status || ''}"></div>
                    <div>
                        <label class="block text-sm font-medium">Status</label>
                        <select name="status" class="mt-1 w-full p-2 border rounded bg-white">
                            ${statuses.map(s => `<option ${patient.status === s ? 'selected' : ''}>${s}</option>`).join('')}
                        </select>
                    </div>
                    <div><label class="block text-sm font-medium">Assign to Study</label><select name="studyId" class="mt-1 w-full p-2 border rounded bg-white"><option value="">None</option>${state.studies.map(s => `<option value="${s.id}" ${patient.studyId === s.id ? 'selected' : ''}>${s.title}</option>`).join('')}</select></div>
                    <div><label class="block text-sm font-medium">Assign to Site</label><select name="siteId" class="mt-1 w-full p-2 border rounded bg-white"><option value="">None</option>${state.sites.map(s => `<option value="${s.id}" ${patient.siteId === s.id ? 'selected' : ''}>${s.name}</option>`).join('')}</select></div>
                    <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700">Save Changes</button>
